function handleDragStart(n){dragVaule=this.getAttribute("aria-checked");dragSrcEl=this;n.dataTransfer.setDragImage(new Image,0,0);n.dataTransfer.effectAllowed="move";n.dataTransfer.setData("text/html",this.outerHTML)}function handleDragOver(n){return n.preventDefault&&n.preventDefault(),this.classList.add("over"),n.dataTransfer.dropEffect="move",!1}function handleDragEnter(){}function handleDragLeave(){this.classList.remove("over")}function handleDrop(n){var i,t;if(n.stopPropagation&&n.stopPropagation(),dragSrcEl!=this&&(this.parentNode.removeChild(dragSrcEl),i=n.dataTransfer.getData("text/html"),this.insertAdjacentHTML("beforebegin",i),t=this.previousSibling,t.className="mdc-list-item",new mdc.ripple.MDCRipple(t),addDnDHandlers(t),dragVaule==="true")){const n=t.getAttribute("data-value"),i=document.getElementById(`${n}-lc`);t.setAttribute("aria-checked","true");i.checked=!0}return this.classList.remove("over"),!1}function handleDragEnd(){this.classList.remove("over");dragSrcEl=null}function addDnDHandlers(n){n.addEventListener("dragstart",handleDragStart,!1);n.addEventListener("dragenter",handleDragEnter,!1);n.addEventListener("dragover",handleDragOver,!1);n.addEventListener("dragleave",handleDragLeave,!1);n.addEventListener("drop",handleDrop,!1);n.addEventListener("dragend",handleDragEnd,!1)}var dragSrcEl,dragVaule,cols;const IndexShowModal=(n=true,t=true)=>{const i=document.getElementById("indexCreator"),r=document.getElementById("indexModal"),u=document.getElementById("indexProgress");r.style.display=n?"":"none";i&&(i.style.display=n?"none":"");u.style.display=t?"":"none"},ListenerPageMenu=(()=>{const t=new mdc.menu.MDCMenu(document.getElementById("indexPageMenu")),n=document.querySelector("[mtd-data-page]"),i=n.attributes.getNamedItem("mtd-data-page").nodeValue;n.addEventListener("click",()=>{t.open=!0});const r=document.getElementById("indexMenuSize");r.addEventListener("click",n=>{const r=n.target.getAttribute("data-value");document.body.scrollTop=document.documentElement.scrollTop=0;IndexShowModal();var t=new XMLHttpRequest;t.open("POST",`/api/index/${i}/pagesize/${r}`,!0);t.send();t.onreadystatechange=function(){t.readyState==4&&t.status==200&&document.location.reload()}})})(()=>{ListenerPageMenu();const n=document.getElementById("nav-store-ids");n&&sessionStorage.setItem("storeIds",n.value);new MTDTextField("search-text");new MTDTextField("search-number")})();class ExctensionForm{constructor(){this.selectScript=new MTDSelectList("index-filter-extension-list")}}class CustomForm{constructor(){this.resultId=document.getElementById("index-filter-custom-result-id");this.resultType=document.getElementById("index-filter-custom-result-type");this.resultAction=document.getElementById("index-filter-custom-result-action");this.resultValue=document.getElementById("index-filter-custom-result-value");this.selectAction=new MTDSelectList("index-filter-custom-action");this.selectValue=new MTDSelectList("index-filter-custom-list-value");this.selectFields=new MTDSelectList("index-filter-custom-fields");this.textValue=new MTDTextField("index-filter-custom-text-value");this.intValue=new MTDTextField("index-filter-custom-int-value");this.boolValue=new MTDSelectList("index-filter-custom-bool-value");this.dateValue=new MTDTextField("index-filter-custom-date-value")}}const IndexFilterShowTab=n=>{["custom","service","extension"].forEach(t=>{const i=document.getElementById(`index-filter-${t}`);i.style.display=t===n?"block":"none"})},ShowCustomFieldTypes=n=>{["text","int","date","list","bool","text"].forEach(t=>{const i=document.getElementById(`index-filter-custom-${t}`);i.style.display=t===n?"block":"none"})},Service=()=>{new MTDTextField("index-filter-date-start");new MTDTextField("index-filter-date-finish");const n=document.getElementById("index-filter-service-period"),t=document.getElementById("index-filter-service-owners"),i=new MTDSelectList("index-filter-service-list"),r=new MTDSelectList("index-filter-service-owners-list");i.selector.listen("MDCSelect:change",()=>{n.classList.toggle("mtd-main-display-none"),t.classList.toggle("mtd-main-display-none")})},GetCustomPartForType=n=>{let t;switch(n){case"2":case"3":t="int";break;case"5":case"6":t="date";break;case"11":t="list";break;case"12":t="bool";break;default:t="text"}return t},RequestFieldList=(n,t)=>{const i=document.getElementById("index-filter-custom-list-form"),r=i.querySelector("input[id='id-field']");r.value=n;const u=CreateFormData(i);fetch(i.action,{method:i.method,body:u}).then(n=>n.json()).then(n=>{n.value&&(t.RemoveItems(),n.value.forEach((n,i)=>{selected=!1,i===0&&(selected=!0),t.AddItem(n.id,n.value,selected)}))})},Custom=()=>{const n=new CustomForm,t=n.selectFields.div.querySelector(`[data-value='${n.selectFields.selector.value}']`),i=GetCustomPartForType(t);ShowCustomFieldTypes(i);n.selectFields.selector.listen("MDCSelect:change",()=>{const i=n.selectFields.div.querySelector(`[data-value='${n.selectFields.selector.value}']`);if(i){const t=i.getAttribute("data-type"),u=GetCustomPartForType(t);t==="11"&&RequestFieldList(n.selectFields.selector.value,n.selectValue);n.selectAction.div.classList.remove("mtd-main-display-none");const r=document.getElementById("custom-separ");r.classList.remove("mtd-main-display-none");(t==="12"||t==="11")&&(n.selectAction.div.classList.add("mtd-main-display-none"),r.classList.add("mtd-main-display-none"));ShowCustomFieldTypes(u);n.resultType.value=t;n.resultId.value=n.selectFields.selector.value;n.textValue.textField.value="";n.intValue.textField.value="";n.boolValue.selector.value="0";n.dateValue.textField.value="";n.resultValue.value=""}});n.selectAction.selector.listen("MDCSelect:change",()=>{n.resultAction.value=n.selectAction.selector.value});n.selectValue.selector.listen("MDCSelect:change",()=>{n.resultValue.value=n.selectValue.selector.value});n.boolValue.selector.listen("MDCSelect:change",()=>{n.resultValue.value=n.boolValue.selector.value});n.textValue.input.addEventListener("input",()=>{n.resultValue.value=n.textValue.textField.value})},Extension=()=>{const n=new ExctensionForm},WindowHandler=()=>{const t=document.getElementById("index-filter-window"),n=document.getElementById("index-filter-button");n&&n.addEventListener("click",()=>{t.style.display="block",IndexShowModal(!0,!1)});const i=document.getElementById("index-filter-tabs");new mdc.tabBar.MDCTabBar(i)},IndexFilterClose=(()=>{const n=document.getElementById("index-filter-window");n.style.display="none";IndexShowModal(!1,!1)})(()=>{WindowHandler(),Service(),Custom(),Extension()})(),OnClickFilterColumn=n=>{if(dragSrcEl)return!1;const t=n.currentTarget,r=t.getAttribute("data-value"),u=t.getAttribute("aria-checked"),i=document.getElementById(`${r}-lc`);t.setAttribute("aria-checked",u==="true"?"false":"true");i.checked=!i.checked},ListenerFilterColumn=()=>{const t=document.getElementById("indexButtonColumnEdit");t.addEventListener("click",()=>{IndexShowModal(!0,!1),n.style.display="block"});const n=document.getElementById("indexFilterColumn"),i=document.getElementById("indexButtonColCancel"),r=document.getElementById("indexButtonColClose");i.addEventListener("click",()=>{n.style.display="none",IndexShowModal(!1,!1)});r.addEventListener("click",()=>{n.style.display="none",IndexShowModal(!1,!1)});document.getElementById("indexButtonColApply").addEventListener("click",()=>{var t,u,i;const e=document.getElementById("indexListColumn"),o=e.querySelectorAll("li");let f="";o.forEach(n=>{const t=n.getAttribute("aria-checked");if(t==="true"){const t=n.getAttribute("data-value");f+=`${t},`}});document.getElementById("indexDataColumnList").value=f;const r=document.getElementById("indexFormColumn"),s=document.getElementById("show-number"),h=document.getElementById("show-date"),c=document.getElementById("indexDataColumnNumber"),l=document.getElementById("indexDataColumnDate");for(c.value=s.checked,l.value=h.checked,t=new XMLHttpRequest,t.open("POST",r.getAttribute("action"),!0),n.style.display="none",IndexShowModal(!0,!0),u=new FormData,i=0;i<r.length;i++)u.append(r[i].name,r[i].value);t.send(u);t.onreadystatechange=function(){t.readyState==4&&t.status==200&&document.location.reload(location.hash,"")}})};dragSrcEl=null;dragVaule=!1;cols=document.querySelectorAll("#indexListColumn .mdc-list-item");[].forEach.call(cols,addDnDHandlers);(()=>{ListenerFilterColumn()})();