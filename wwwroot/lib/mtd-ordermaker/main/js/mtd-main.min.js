const snackbar=new mdc.snackbar.MDCSnackbar(document.getElementById("main-snack")),MainShowSnackBar=(n,t=false)=>{const i=document.getElementById("main-snack");i.classList.add("mdc-snackbar--open");snackbar.labelText=n;t&&(snackbar.timeoutMs=1e4);snackbar.open()},newGuid=()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,n=>(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)),rippleFor=n=>{const t=document.querySelectorAll(n);return t.forEach(n=>{const t=new mdc.ripple.MDCRipple(n);t.unbounded=!0}),!0},ListenerForDataHref=()=>{const n=document.querySelectorAll("[mtd-data-href]");n.forEach(n=>{n.addEventListener("click",()=>{ActionShowModal();const t=n.getAttribute("mtd-data-href"),i=n.getAttribute("mtd_data_href-target");i?(window.open(t,i),ActionShowModal(!1)):window.location.href=t})})},CreateFormData=n=>{for(var i=new FormData,t=0;t<n.length;t++)n[t].getAttribute("type")=="checkbox"?i.append(n[t].name,n[t].checked):i.append(n[t].name,n[t].value),n[t].files&&n[t].files.length>0&&i.append(n[t].name,n[t].files[0],n[t].files[0].name);return i},CheckRequired=n=>{let t=0;if(n){const i=n.querySelectorAll("[required]");i&&i.forEach(n=>{n.value||t++})}return t},ListenerForPostData=()=>{const n=document.querySelectorAll("form[mtd-data-form]");n.forEach(n=>{const t=n.querySelector("input[mtd-data-result]"),i=n.getAttribute("action"),r=n.querySelectorAll("[mtd-data-clicker]"),u=n.querySelectorAll("input[mtd-data-input]");r.forEach(r=>{const u=r.getAttribute("mtd-data-clicker"),f=r.getAttribute("mtd-data-location"),e=r.getAttribute("mtd-data-message");r.addEventListener("click",()=>{const o=CheckRequired(n);if(o>0){const n=new mdc.dialog.MDCDialog(document.getElementById("dialog-main-info"));return n.open(),!1}ActionShowModal();u&&(t.value=u);const s=CreateFormData(n),r=new XMLHttpRequest;r.open("post",i,!0);r.send(s);r.onreadystatechange=function(){r.readyState==4&&r.status==200&&(e&&sessionStorage.setItem("Message",e),f?document.location=f:document.location.reload());r.status==400&&setTimeout(()=>{ActionShowModal(!1),MainShowSnackBar(r.responseText,!0)},1e3);r.status==500&&setTimeout(()=>{ActionShowModal(!1),MainShowSnackBar("500 Internal Server Error",!0)},1e3)}})});u.forEach(t=>{const i=t.getAttribute("mtd-data-location"),r=t.getAttribute("mtd-data-message");t.addEventListener("keydown",t=>{var u,f;if(t.keyCode===13){const e=CheckRequired();if(e>0)return!1;t.preventDefault();ActionShowModal();u=new XMLHttpRequest;u.open("POST",n.getAttribute("action"),!0);f=CreateFormData(n);u.send(f);u.onreadystatechange=function(){u.readyState==4&&u.status==200&&(r&&sessionStorage.setItem("Message",r),i?document.location=i:document.location.reload());u.status==400&&setTimeout(()=>{ActionShowModal(!1),MainShowSnackBar(u.responseText,!0)},1e3);u.status==500&&setTimeout(()=>{ActionShowModal(!1),MainShowSnackBar("500 Internal Server Error",!0)},1e3)}}})})})},ActionShowModal=n=true=>{const t=n==!0?"block":"none";document.getElementById("mainModal").style.display=t},ListenerForAction=()=>{const t=document.getElementById("main-action-button"),n=document.getElementById("main-action-menu");if(n){const i=new mdc.menu.MDCMenu(n);i.setFixedPosition(!0);t.addEventListener("click",()=>{i.open=!0})}},DetectMobile=(()=>{(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(document.body.style.height="")})(()=>{DetectMobile();sessionStorage.getItem("Message")&&(MainShowSnackBar(sessionStorage.getItem("Message")),sessionStorage.removeItem("Message"));sessionStorage.getItem("ErrorMessage")&&(MainShowSnackBar(sessionStorage.getItem("ErrorMessage"),!0),sessionStorage.removeItem("ErrorMessage"));ListenerForAction();rippleFor(".mdc-checkbox");rippleFor(".mdc-icon-button");rippleFor(".mdc-list-item");rippleFor(".mdc-fab");rippleFor(".mdc-button");rippleFor(".mdc-card__primary-action");const e=document.querySelectorAll(".mdc-icon-button");e.forEach(n=>{new mdc.iconButton.MDCIconButtonToggle(n)});const i=mdc.drawer.MDCDrawer.attachTo(document.querySelector(".mdc-drawer")),r=mdc.topAppBar.MDCTopAppBar.attachTo(document.getElementById("app-bar"));r.setScrollTarget(document.getElementById("drawer-main-content"));r.listen("MDCTopAppBar:nav",()=>{i.open=!i.open});let n=0;const t=window.location.href.toLowerCase();t.includes("/identity/users")&&(n++,document.getElementById("menu-users").classList.add("mdc-list-item--activated"));t.includes("/config")&&(n++,document.getElementById("menu-config").classList.add("mdc-list-item--activated"));t.includes("/identity/account/manage")&&(n++,document.getElementById("menu-account").classList.add("mdc-list-item--activated"));n===0&&document.getElementById("menu-desk").classList.add("mdc-list-item--activated");ListenerForDataHref();ListenerForPostData();const u=document.getElementById("main-user-button");if(u){const n=new mdc.menuSurface.MDCMenuSurface(document.getElementById("main-user-menu"));n.setFixedPosition(!0);u.addEventListener("click",()=>{n.open()})}const f=document.getElementById("main-apps-button");if(f){const n=new mdc.menuSurface.MDCMenuSurface(document.getElementById("main-apps-menu"));n.setFixedPosition(!0);f.addEventListener("click",()=>{n.open()})}})();class MTDSelectList{constructor(n){this.div=document.getElementById(n);this.selector=new mdc.select.MDCSelect(document.getElementById(n));this.input=document.getElementById(`${n}-input`);this.input.value=this.selector.value;this.selector.listen("MDCSelect:change",()=>{this.input.value=this.selector.value});this.itemTemplate=document.getElementById("mtd-select-list-helper-item")}AddItem(n,t,i=false){const f=this.itemTemplate.querySelector("li");let r=f.cloneNode(!0);r.setAttribute("data-value",n);const o=new mdc.ripple.MDCRipple(r);let e=r.querySelector(".mdc-list-item__text");e.textContent=t;const u=this.div.querySelector(".mdc-list");if(u.appendChild(r),i){const n=u.getElementsByTagName("li").length;this.selector.selectedIndex=n-1}}RemoveItems(){this.selector.selectedIndex=-1;const n=this.div.querySelector(".mdc-list");for(n.innerHTML="";n.firstChild;)n.removeChild(n.firstChild)}}class MTDTextField{constructor(n){this.base=document.getElementById(n);this.textField=new mdc.textField.MDCTextField(this.base);this.input=document.getElementById(`${n}-input`)}}