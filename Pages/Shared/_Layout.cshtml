@*
    MTD OrderMaker - http://ordermaker.org
    Copyright (c) 2019 Oleg Bruev <job4bruev@gmail.com>. All rights reserved.

    This file is part of MTD OrderMaker.
    MTD OrderMaker is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see  https://www.gnu.org/licenses/.
*@

@using Microsoft.AspNetCore.Identity
@using Mtd.OrderMaker.Server.Areas.Identity.Data
@inject SignInManager<WebAppUser> SignInManager
@inject UserManager<WebAppUser> UserManager
@inject Server.Services.ConfigHandler configHandler;


@using Microsoft.AspNetCore.Mvc.Localization
@inject IHtmlLocalizer<SharedResource> Localizer


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no">

    <title>@ViewData["Title"] | OrderMaker</title>
    @*<link rel="stylesheet" href="~/lib/google/css/material-components-web.css" asp-append-version="true" />*@
    @*<link rel="stylesheet" href="~/lib/google/iconfont/material-icons.css" asp-append-version="true" />*@
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <link href="https://unpkg.com/material-components-web@6.0.0/dist/material-components-web.min.css" rel="stylesheet" />

    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    
    <environment include="Development">
        <link rel="stylesheet" href="~/lib/mtd-ordermaker/main/css/mtd-main.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/mtd-ordermaker/main/css/mtd-app.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/mtd-ordermaker/common/css/mtd-desk.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/mtd-ordermaker/mtd-img-selector/css/mtd-img-selector.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/mtd-ordermaker/mtd-checkbox/css/mtd-checkbox.css" asp-append-version="true" />

        <link rel="stylesheet" href="~/lib/fontawesome/css/fontawesome.min.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/fontawesome/css/solid.min.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/fontawesome/css/regular.min.css" asp-append-version="true" />
    </environment>

    <environment exclude="Development">
        <link rel="stylesheet" href="~/lib/mtd-ordermaker/main/css/mtd-main.min.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/mtd-ordermaker/common/css/mtd-desk.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/mtd-ordermaker/mtd-img-selector/css/mtd-img-selector.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/mtd-ordermaker/mtd-checkbox/css/mtd-checkbox.css" asp-append-version="true" />

        <link rel="stylesheet" href="~/lib/fontawesome/css/fontawesome.min.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/fontawesome/css/solid.min.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/fontawesome/css/regular.min.css" asp-append-version="true" />
    </environment>



    @RenderSection("Head", required: false)
</head>
<body class="mdc-typography">
    @*<partial name="_CookieConsentPartial" />*@
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <div class="drawer-frame-root">

        @await Html.PartialAsync("./_layoutAside.cshtml")
        <div class="mdc-drawer-scrim"></div>

        <div class="drawer-frame-app-content">
            @await Html.PartialAsync("./_layoutHeader")
            <div id="drawer-main-content">

                @await Html.PartialAsync("./_layoutMainModal.cshtml")

                <div class="mdc-top-app-bar--fixed-adjust"></div>

                <div class="mtd-main-informer-header">

                    <div class="mtd-main-informer-title">
                        <div>
                            <span class="mtd-main-informer-title--first">@ViewBag.Title</span>
                            <br />
                            @ViewBag.SecondTitle
                        </div>

                        @if (IsSectionDefined("Action"))
                        {
                            <div class="mdc-menu-surface--anchor">
                                <button id="main-action-button" class="mdc-button mdc-button--raised mdc-theme--secondary-bg">
                                    <div class="mdc-button__ripple"></div>
                                    <span class="mdc-button__label">@Localizer["Actions"]</span>
                                    <i class="mdc-button__icon fas fa-caret-down" aria-hidden="true"></i>
                                </button>
                                <div id="main-action-menu" class="mdc-menu mdc-menu-surface">
                                    <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical">
                                        @RenderSection("Action")
                                    </ul>
                                </div>
                            </div>
                        }
                    </div>

                    @if (IsSectionDefined("Breadcrumb"))
                    {
                        <ul class="mtd-main-informer-breadcrumb">
                            @RenderSection("Breadcrumb")
                        </ul>
                    }
                </div>
                @RenderBody()
            </div>
        </div>
    </div>

    <div id="main-snack" class="mdc-snackbar">
        <div class="mdc-snackbar__surface">
            <div class="mdc-snackbar__label"
                 role="status"
                 aria-live="polite">
            </div>
            <div class="mdc-snackbar__actions">
                <button class="mdc-icon-button mdc-snackbar__dismiss material-icons">close</button>
            </div>
        </div>
    </div>

    <div id="dialog-main-info" class="mdc-dialog"
         role="alertdialog"
         aria-modal="true"
         aria-labelledby="dialog-main-info-title"
         aria-describedby="dialog-main-info-content">
        <div class="mdc-dialog__container">
            <div class="mdc-dialog__surface">
                <h2 class="mdc-dialog__title" id="dialog-main-info-title">
                    Обязательные поля не заполнены!
                </h2>
                <div class="mdc-dialog__content" id="dialog-main-info-content">
                    Заполните обязательные поля отмеченные красным цветом.
                </div>
                <footer class="mdc-dialog__actions">
                    <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="no">
                        <span class="mdc-button__label">Ok</span>
                    </button>
                </footer>
            </div>
        </div>
        <div class="mdc-dialog__scrim"></div>
    </div>

    <environment include="Development">
        @*<script src="~/lib/google/js/material-components-web.js" asp-append-version="true"></script>*@
        <script src="https://unpkg.com/material-components-web@6.0.0/dist/material-components-web.min.js"></script>
        <script src="~/lib/mtd-ordermaker/main/js/mtd-main.js" asp-append-version="true"></script>

        <script src="~/lib/mtd-ordermaker/main/js/mtd-app.js" asp-append-version="true"></script>

        <script src="~/lib/mtd-ordermaker/main/js/mtd-select-list.js" asp-append-version="true"></script>
        <script src="~/lib/mtd-ordermaker/main/js/mtd-text-field.js" asp-append-version="true"></script>
        <script src="~/lib/mtd-ordermaker/mtd-img-selector/js/mtd-img-selector.js" asp-append-version="true"></script>
        <script src="~/lib/mtd-ordermaker/mtd-checkbox/js/mtd-checkbox.js" asp-append-version="true"></script>
        <script src="~/lib/fontawesome/js/fontawesome.min.js" asp-append-version="true"></script>
        <script src="~/lib/fontawesome/js/solid.min.js" asp-append-version="true"></script>
        <script src="~/lib/fontawesome/js/regular.min.js" asp-append-version="true"></script>
    </environment>
    <environment exclude="Development">
        <script src="https://unpkg.com/material-components-web@6.0.0/dist/material-components-web.min.js"></script>
        <script src="~/lib/mtd-ordermaker/main/js/mtd-main.min.js" asp-append-version="true"></script>
        <script src="~/lib/mtd-ordermaker/mtd-img-selector/js/mtd-img-selector.js" asp-append-version="true"></script>
        <script src="~/lib/mtd-ordermaker/mtd-checkbox/js/mtd-checkbox.js" asp-append-version="true"></script>
        <script src="~/lib/fontawesome/js/fontawesome.min.js" asp-append-version="true"></script>
        <script src="~/lib/fontawesome/js/solid.min.js" asp-append-version="true"></script>
        <script src="~/lib/fontawesome/js/regular.min.js" asp-append-version="true"></script>
    </environment>


        @RenderSection("Scripts", required: false)
</body>
</html>
